---
title: Leaning into the power of AI coding
date: "2024-10-16T03:55:59Z"
lastmod: "2024-10-16T03:56:01Z"
categories:
  - links
wp_id: 3656
---

![Leaning into the power of AI coding](/blog/assets/DALLÂ·E-2024-10-16-11.52.50-A-colorful-single-panel-comic-strip-in-the-style-of-classic-Calvin-Hobbes.-Calvin-a-young-boy-with-wild-hair-is-wobbling-precariously-on-a-bike-as.webp)

<p>Yesterday (15 Oct 2024), I used <a href="https://www.cursor.com/">Cursor</a> to code more than I ever have. (Doing's how we learn, I guess. Not just reading.)</p>
<svg overflow="hidden" viewbox="0 0 1697 1288" width="500" xml:space="preserve" xmlns="http://www.w3.org/2000/svg"><path d="M32 18h1621v107H32z" fill="#C0E6F5"></path><path d="M521 130h92v82h-92zM521 232h163v82H521zM521 334h526v82H521zM521 437h97v81h-97zM521 539h5v81h-5zM521 641h255v81H521zM521 743h143v81H521zM521 845h342v81H521zM521 946h92v82h-92zM521 1049h169v81H521zM521 1151h1122v81H521z" fill="#FFB628"></path><text font-family="Aptos Narrow,Aptos Narrow_MSFontService,sans-serif" font-size="78" font-stretch="semi-condensed" font-weight="700" transform="translate(47.4 96)">Date</text><text font-family="Aptos Narrow,Aptos Narrow_MSFontService,sans-serif" font-size="78" font-stretch="semi-condensed" font-weight="700" transform="translate(526.35 96)">Usage</text><text font-family="Aptos Narrow,Aptos Narrow_MSFontService,sans-serif" font-size="78" font-stretch="semi-condensed" font-weight="400" transform="translate(47.4 198)">05</text><text font-family="Aptos Narrow,Aptos Narrow_MSFontService,sans-serif" font-size="78" font-stretch="semi-condensed" font-weight="400" transform="translate(126.46 198)">-</text><text font-family="Aptos Narrow,Aptos Narrow_MSFontService,sans-serif" font-size="78" font-stretch="semi-condensed" font-weight="400" transform="translate(145.27 198)">10</text><text font-family="Aptos Narrow,Aptos Narrow_MSFontService,sans-serif" font-size="78" font-stretch="semi-condensed" font-weight="400" transform="translate(224.34 198)">-</text><text font-family="Aptos Narrow,Aptos Narrow_MSFontService,sans-serif" font-size="78" font-stretch="semi-condensed" font-weight="400" transform="translate(248.4 198)">2024</text><text font-family="Aptos Narrow,Aptos Narrow_MSFontService,sans-serif" font-size="78" font-stretch="semi-condensed" font-weight="400" transform="translate(1566.77 198)">15</text><text font-family="Aptos Narrow,Aptos Narrow_MSFontService,sans-serif" font-size="78" font-stretch="semi-condensed" font-weight="400" transform="translate(47.4 300)">06</text><text font-family="Aptos Narrow,Aptos Narrow_MSFontService,sans-serif" font-size="78" font-stretch="semi-condensed" font-weight="400" transform="translate(126.46 300)">-</text><text font-family="Aptos Narrow,Aptos Narrow_MSFontService,sans-serif" font-size="78" font-stretch="semi-condensed" font-weight="400" transform="translate(145.27 300)">10</text><text font-family="Aptos Narrow,Aptos Narrow_MSFontService,sans-serif" font-size="78" font-stretch="semi-condensed" font-weight="400" transform="translate(224.34 300)">-</text><text font-family="Aptos Narrow,Aptos Narrow_MSFontService,sans-serif" font-size="78" font-stretch="semi-condensed" font-weight="400" transform="translate(248.4 300)">2024</text><text font-family="Aptos Narrow,Aptos Narrow_MSFontService,sans-serif" font-size="78" font-stretch="semi-condensed" font-weight="400" transform="translate(1566.77 300)">27</text><text font-family="Aptos Narrow,Aptos Narrow_MSFontService,sans-serif" font-size="78" font-stretch="semi-condensed" font-weight="400" transform="translate(47.4 402)">07</text><text font-family="Aptos Narrow,Aptos Narrow_MSFontService,sans-serif" font-size="78" font-stretch="semi-condensed" font-weight="400" transform="translate(126.5 402)">-</text><text font-family="Aptos Narrow,Aptos Narrow_MSFontService,sans-serif" font-size="78" font-stretch="semi-condensed" font-weight="400" transform="translate(145.32 402)">10</text><text font-family="Aptos Narrow,Aptos Narrow_MSFontService,sans-serif" font-size="78" font-stretch="semi-condensed" font-weight="400" transform="translate(224.38 402)">-</text><text font-family="Aptos Narrow,Aptos Narrow_MSFontService,sans-serif" font-size="78" font-stretch="semi-condensed" font-weight="400" transform="translate(248.44 402)">2024</text><text font-family="Aptos Narrow,Aptos Narrow_MSFontService,sans-serif" font-size="78" font-stretch="semi-condensed" font-weight="400" transform="translate(1566.77 402)">87</text><text font-family="Aptos Narrow,Aptos Narrow_MSFontService,sans-serif" font-size="78" font-stretch="semi-condensed" font-weight="400" transform="translate(47.4 504)">08</text><text font-family="Aptos Narrow,Aptos Narrow_MSFontService,sans-serif" font-size="78" font-stretch="semi-condensed" font-weight="400" transform="translate(126.46 504)">-</text><text font-family="Aptos Narrow,Aptos Narrow_MSFontService,sans-serif" font-size="78" font-stretch="semi-condensed" font-weight="400" transform="translate(145.27 504)">10</text><text font-family="Aptos Narrow,Aptos Narrow_MSFontService,sans-serif" font-size="78" font-stretch="semi-condensed" font-weight="400" transform="translate(224.34 504)">-</text><text font-family="Aptos Narrow,Aptos Narrow_MSFontService,sans-serif" font-size="78" font-stretch="semi-condensed" font-weight="400" transform="translate(248.4 504)">2024</text><text font-family="Aptos Narrow,Aptos Narrow_MSFontService,sans-serif" font-size="78" font-stretch="semi-condensed" font-weight="400" transform="translate(1566.77 504)">16</text><text font-family="Aptos Narrow,Aptos Narrow_MSFontService,sans-serif" font-size="78" font-stretch="semi-condensed" font-weight="400" transform="translate(47.4 606)">09</text><text font-family="Aptos Narrow,Aptos Narrow_MSFontService,sans-serif" font-size="78" font-stretch="semi-condensed" font-weight="400" transform="translate(126.46 606)">-</text><text font-family="Aptos Narrow,Aptos Narrow_MSFontService,sans-serif" font-size="78" font-stretch="semi-condensed" font-weight="400" transform="translate(145.27 606)">10</text><text font-family="Aptos Narrow,Aptos Narrow_MSFontService,sans-serif" font-size="78" font-stretch="semi-condensed" font-weight="400" transform="translate(224.34 606)">-</text><text font-family="Aptos Narrow,Aptos Narrow_MSFontService,sans-serif" font-size="78" font-stretch="semi-condensed" font-weight="400" transform="translate(248.4 606)">2024</text><text font-family="Aptos Narrow,Aptos Narrow_MSFontService,sans-serif" font-size="78" font-stretch="semi-condensed" font-weight="400" transform="translate(47.4 708)">10</text><text font-family="Aptos Narrow,Aptos Narrow_MSFontService,sans-serif" font-size="78" font-stretch="semi-condensed" font-weight="400" transform="translate(126.46 708)">-</text><text font-family="Aptos Narrow,Aptos Narrow_MSFontService,sans-serif" font-size="78" font-stretch="semi-condensed" font-weight="400" transform="translate(145.27 708)">10</text><text font-family="Aptos Narrow,Aptos Narrow_MSFontService,sans-serif" font-size="78" font-stretch="semi-condensed" font-weight="400" transform="translate(224.34 708)">-</text><text font-family="Aptos Narrow,Aptos Narrow_MSFontService,sans-serif" font-size="78" font-stretch="semi-condensed" font-weight="400" transform="translate(248.4 708)">2024</text><text font-family="Aptos Narrow,Aptos Narrow_MSFontService,sans-serif" font-size="78" font-stretch="semi-condensed" font-weight="400" transform="translate(1566.77 708)">42</text><text font-family="Aptos Narrow,Aptos Narrow_MSFontService,sans-serif" font-size="78" font-stretch="semi-condensed" font-weight="400" transform="translate(47.4 810)">11</text><text font-family="Aptos Narrow,Aptos Narrow_MSFontService,sans-serif" font-size="78" font-stretch="semi-condensed" font-weight="400" transform="translate(126.46 810)">-</text><text font-family="Aptos Narrow,Aptos Narrow_MSFontService,sans-serif" font-size="78" font-stretch="semi-condensed" font-weight="400" transform="translate(145.27 810)">10</text><text font-family="Aptos Narrow,Aptos Narrow_MSFontService,sans-serif" font-size="78" font-stretch="semi-condensed" font-weight="400" transform="translate(224.34 810)">-</text><text font-family="Aptos Narrow,Aptos Narrow_MSFontService,sans-serif" font-size="78" font-stretch="semi-condensed" font-weight="400" transform="translate(248.4 810)">2024</text><text font-family="Aptos Narrow,Aptos Narrow_MSFontService,sans-serif" font-size="78" font-stretch="semi-condensed" font-weight="400" transform="translate(1566.77 810)">24</text><text font-family="Aptos Narrow,Aptos Narrow_MSFontService,sans-serif" font-size="78" font-stretch="semi-condensed" font-weight="400" transform="translate(47.4 912)">12</text><text font-family="Aptos Narrow,Aptos Narrow_MSFontService,sans-serif" font-size="78" font-stretch="semi-condensed" font-weight="400" transform="translate(126.46 912)">-</text><text font-family="Aptos Narrow,Aptos Narrow_MSFontService,sans-serif" font-size="78" font-stretch="semi-condensed" font-weight="400" transform="translate(145.27 912)">10</text><text font-family="Aptos Narrow,Aptos Narrow_MSFontService,sans-serif" font-size="78" font-stretch="semi-condensed" font-weight="400" transform="translate(224.34 912)">-</text><text font-family="Aptos Narrow,Aptos Narrow_MSFontService,sans-serif" font-size="78" font-stretch="semi-condensed" font-weight="400" transform="translate(248.4 912)">2024</text><text font-family="Aptos Narrow,Aptos Narrow_MSFontService,sans-serif" font-size="78" font-stretch="semi-condensed" font-weight="400" transform="translate(1566.77 912)">57</text><text font-family="Aptos Narrow,Aptos Narrow_MSFontService,sans-serif" font-size="78" font-stretch="semi-condensed" font-weight="400" transform="translate(47.4 1014)">13</text><text font-family="Aptos Narrow,Aptos Narrow_MSFontService,sans-serif" font-size="78" font-stretch="semi-condensed" font-weight="400" transform="translate(126.46 1014)">-</text><text font-family="Aptos Narrow,Aptos Narrow_MSFontService,sans-serif" font-size="78" font-stretch="semi-condensed" font-weight="400" transform="translate(145.27 1014)">10</text><text font-family="Aptos Narrow,Aptos Narrow_MSFontService,sans-serif" font-size="78" font-stretch="semi-condensed" font-weight="400" transform="translate(224.34 1014)">-</text><text font-family="Aptos Narrow,Aptos Narrow_MSFontService,sans-serif" font-size="78" font-stretch="semi-condensed" font-weight="400" transform="translate(248.4 1014)">2024</text><text font-family="Aptos Narrow,Aptos Narrow_MSFontService,sans-serif" font-size="78" font-stretch="semi-condensed" font-weight="400" transform="translate(1566.77 1014)">15</text><text font-family="Aptos Narrow,Aptos Narrow_MSFontService,sans-serif" font-size="78" font-stretch="semi-condensed" font-weight="400" transform="translate(47.4 1117)">14</text><text font-family="Aptos Narrow,Aptos Narrow_MSFontService,sans-serif" font-size="78" font-stretch="semi-condensed" font-weight="400" transform="translate(126.46 1117)">-</text><text font-family="Aptos Narrow,Aptos Narrow_MSFontService,sans-serif" font-size="78" font-stretch="semi-condensed" font-weight="400" transform="translate(145.27 1117)">10</text><text font-family="Aptos Narrow,Aptos Narrow_MSFontService,sans-serif" font-size="78" font-stretch="semi-condensed" font-weight="400" transform="translate(224.34 1117)">-</text><text font-family="Aptos Narrow,Aptos Narrow_MSFontService,sans-serif" font-size="78" font-stretch="semi-condensed" font-weight="400" transform="translate(248.4 1117)">2024</text><text font-family="Aptos Narrow,Aptos Narrow_MSFontService,sans-serif" font-size="78" font-stretch="semi-condensed" font-weight="400" transform="translate(1566.77 1117)">28</text><text font-family="Aptos Narrow,Aptos Narrow_MSFontService,sans-serif" font-size="78" font-stretch="semi-condensed" font-weight="400" transform="translate(47.4 1219)">15</text><text font-family="Aptos Narrow,Aptos Narrow_MSFontService,sans-serif" font-size="78" font-stretch="semi-condensed" font-weight="400" transform="translate(126.46 1219)">-</text><text font-family="Aptos Narrow,Aptos Narrow_MSFontService,sans-serif" font-size="78" font-stretch="semi-condensed" font-weight="400" transform="translate(145.27 1219)">10</text><text font-family="Aptos Narrow,Aptos Narrow_MSFontService,sans-serif" font-size="78" font-stretch="semi-condensed" font-weight="400" transform="translate(224.34 1219)">-</text><text font-family="Aptos Narrow,Aptos Narrow_MSFontService,sans-serif" font-size="78" font-stretch="semi-condensed" font-weight="400" transform="translate(248.4 1219)">2024</text><text font-family="Aptos Narrow,Aptos Narrow_MSFontService,sans-serif" font-size="78" font-stretch="semi-condensed" font-weight="400" transform="translate(1530.68 1219)">186</text><path d="M511 18h5v1h-5z" fill="#E0E0E0"></path><path d="M32.5 120.5h1621" fill="none"></path><path d="M32 120h1621v5H32z" fill="#44B3E1"></path></svg>
<p>This was mainly to create and publish 2 libraries on npm over 6 hours:</p>
<ol class="wp-block-list">
<li><a href="https://www.npmjs.com/package/asyncsse">asyncsse</a> - which converts a <a href="https://developer.mozilla.org/en-US/docs/Web/API/Server-sent_events/Using_server-sent_events">Server-Sent Event</a> stream into an async iterator that I can use in a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/for-await...of">for await ... of</a> loop</li>
<li><a href="https://www.npmjs.com/package/asyncllm">asyncllm</a> - which standardizes the Server-Sent Events streamed by the popular LLMs into an easy to use form.</li>
</ol>
<p>This exercise broke several mental barriers for me.</p>
<p><strong>Writing in a new language</strong>. <a href="https://deno.com/blog/v2.0">Deno 2.0</a> was released recently. I was impressed by the compatibility with npm packages. Plus, it's a single EXE download that includes a linter, tester, formatter, etc. Like all recent cool fast tools, it's written in Rust. So I decided to use it for testing. Running <code>deno test</code> runs the <a href="https://github.com/gramener/asyncsse/blob/main/test.js">entire test suite</a>. My prompts included asking it to:</p>
<ul class="wp-block-list">
<li><code>Create a Deno HTTP server to mock requests for the tests</code>. This is cool because a single, simple code chunk runs the server within the test suite.</li>
<li><code>Serve static files from samples/</code> to move my tests into files</li>
</ul>
<p><strong>Writing test cases</strong>. Every line of this code was written by Cursor via Claude 3.5 Sonnet. <em>Every line</em>. My prompt was, <code>Look at the code in @index.js and write test cases for scenarios not yet covered.</code> It's surprising how much of the SSE spec it already knew, and anticipated edge cases like:</p>
<ul class="wp-block-list">
<li><a href="https://github.com/gramener/asyncsse/blob/13b33140f6bc17618789b5075a96f8f85a84c605/test.js#L67-L69">SSE values might have a colon</a>. I learnt for the first time that the <code>limit</code> parameter in <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/split">String.split()</a> is very different from Python's str.split. (The splits, then picks the first few, ignoring the rest. Python ensures the rest is packed into the last split.) This helped me find a major bug.</li>
<li><a href="https://github.com/gramener/asyncsse/blob/13b33140f6bc17618789b5075a96f8f85a84c605/test.js#L52-L54">SSE has comments</a>. Empty keys are treated as strings. Didn't know this.</li>
</ul>
<p>I was able to use it to generate test cases based on content as well. <code>Based on @index.js and @<a href="https://github.com/gramener/asyncllm/blob/main/samples/openai.txt">openai.txt</a> write a test case that verifies the functionality</code>  created the entire <a href="https://github.com/gramener/asyncllm/blob/cbde11155f3a8567794058d01da1bd8d72f996b7/test.js#L25-L34">test case for OpenAI responses</a>. (I did have to edit it because LLMs don't count very well, but it was minimal.)</p>
<p><strong>Bridging test coverage gaps</strong>. The prompt that gave me the most delightful result was <code>Are there any scenarios in @index.js not tested by @test.js?</code> It did a great job of highlighting that I hadn't covered Groq, Azure, or CloudFlare AI workers (though they were mentioned in the comments), error handling, empty/null values in some cases, tested for multiple tool calls. I had it generate mock test data for some of these and added the tests.</p>
<p><strong>Enhancing knowledge with references</strong>. I passed Cursor the SSE documentation via <code>@https://developer.mozilla.org/en-US/docs/Web/API/Server-sent_events/Using_server-sent_events</code> and asked it to find more scenarios my code at <code>@index.js</code> had not covered. This found a number of new issues.</p>
<ul class="wp-block-list">
<li><a href="https://github.com/gramener/asyncsse/blob/13b33140f6bc17618789b5075a96f8f85a84c605/test.js#L79-L82">SSE values can be split across multiple lines</a>.</li>
<li><a href="https://github.com/gramener/asyncsse/blob/13b33140f6bc17618789b5075a96f8f85a84c605/test.js#L75-L78">Fields without values are valid</a>.</li>
<li><a href="https://github.com/gramener/asyncsse/blob/13b33140f6bc17618789b5075a96f8f85a84c605/test.js#L71-L73">Empty lines should be ignored</a>.</li>
</ul>
<p><strong>Generating bindings</strong>. I avoid TypeScript because I don't know it. Plus, it requires an compilation step for the browser. But TypeScript bindings are helpful. So I prompted Cursor, using the Composer (which can create new files) to <code>Create TypeScript bindings for @index.js in index.d.ts</code> - which id did almost perfectly.</p>
<p><strong>Check for errors</strong>. I typed <code>Check this file for errors</code> on @<a href="https://github.com/gramener/asyncsse/blob/main/index.d.ts">index.d.ts</a>. I don't know enough to figure this out. It went through the description and said everything seems fine. But I saw a TypeScript plugin error that said, <code>Property 'data' of type 'string | undefined' is not assignable to 'string' index type 'string'.ts(2411)</code>. When prompted, it spotted the issue. (The earlier code assumed all properties are strings. But some can be undefined too. It fixed it.)</p>
<p><strong>Documentation</strong>. At first, I asked the Composer to <code>Create a README.md suitable for a world-class professional open source npm package</code> and it did a <a href="https://github.com/gramener/asyncsse/blob/main/README.md">pretty good job</a>. I just needed to update the repository name. I further prompted it to <code>Modify README based on @index.js and share examples from @test.js</code> on <a href="https://github.com/gramener/asyncllm/blob/main/README.md">asyncllm</a>, which did an excellent job.</p>
<p><strong>Code review</strong>. I asked it to <code>Review this code. Suggest possible improvements for simplicity, future-proofing, robustness, and efficiency</code> and it shared a few very effective improvements.</p>
<ol class="wp-block-list">
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Regular_expressions/Lookahead_assertion">Regex lookaheads</a> for efficient regular expression splitting, i.e. use <code>buffer.split(/(?=\r?\n\r?\n)/)</code> instead of <code>buffer.split(/(\r?\n\r?\n)/)</code> -- and though I haven't tested this, it looked cool.</li>
<li>Restructuring complex if-else code into <a href="https://github.com/gramener/asyncllm/blob/cbde11155f3a8567794058d01da1bd8d72f996b7/index.js#L64-L84">elegant parsers</a> that made my code a lot more modular.</li>
<li>Error handling. It added <code>try {} catch {}</code> blocks at a few places that helped catch errors that I don't anticipate but don't hurt.</li>
</ol>
<p><strong>Code simplification</strong>. Several times, I passed it a code snippet, saying just <code>Simplify</code>. Here's an example:</p>

```javascript
const events = [];
for await (const event of asyncLLM(...)) {
  events.push(event);
}
```

<p>This can be simplified to</p>

```javascript
const events = await Array.fromAsync(asyncLLM(...))
```

<p><strong>Packaging</strong>. I copied a <code>package.json</code> from an earlier file and asked it to <code>Modify package.json, notable keywords and files and scripts based on @index.js</code> which it did a <a href="https://github.com/gramener/asyncllm/blob/main/package.json">perfect job of</a>.</p>
<p><strong>Blogging</strong>. I wrote this blog post with the help of the chat history on Cursor. Normally, such blog posts take me 3-4 hours. This one took 45 minutes. I just had to pick and choose from history. (I lost a few because I renamed directories. I'll be careful not to do that going forward.)</p>
<hr class="wp-block-separator has-alpha-channel-opacity"/>
<p>Overall, it was a day of great learning. Not in the classroom sense of "Here's something I didn't know before", but rather the cycling / swimming sense of "Here's something I now know to do."</p>
